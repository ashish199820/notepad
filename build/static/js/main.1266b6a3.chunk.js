(this.webpackJsonpnotepad=this.webpackJsonpnotepad||[]).push([[0],{33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},39:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(27),l=a.n(r),s=(a(38),a(9)),i=a(10),c=a(11),u=a(12),m=a(29),d=a(6),h=(a(39),a(32)),g=a(7),p=a.n(g),f=function(){return localStorage.getItem("auth-token")},v=function(){return localStorage.removeItem("auth-token")},E=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={isValid:!1,user:null,data:[],hidden:!0,token:null},e.getNotes=function(){var t=f();console.log("this is the tokem",t),t||e.props.history.push("/"),p.a.get("notes/getNote",{headers:{"auth-token":t}}).then((function(a){!1===a.data.isValid&&e.props.history.push("/"),console.log(a.data),e.setState({user:a.data.user,isValid:!0,data:a.data,token:t})}))},e.newNoteHandler=function(){p.a.post("/notes/newNote",{title:"",content:"",user:"this.state.user"},{headers:{"auth-token":e.state.token}}).then((function(t){e.getNotes()}))},e.deleteHandler=function(t,a){t.preventDefault(),console.log(a),p.a.post("/notes/delete",{ID:a},{headers:{"auth-token":e.state.token}}).then((function(t){console.log("deleted",t),e.getNotes()}))},e.saveHandler=function(t,a,n,o){t.preventDefault(),console.log(a),p.a.put("/notes/editNote",{ID:a,title:n,content:o},{headers:{"auth-token":e.state.token}}).then((function(t){console.log("saved",t),e.getNotes()}))},e.changeHandler=function(t,a){console.log(t.target.name,a);var n=e.state.data.findIndex((function(e){return e._id==a})),o=Object(h.a)(e.state.data);o[n][t.target.name]=t.target.value,e.setState({data:o})},e.logoutHandler=function(){v(),e.props.history.push("/")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getNotes()}},{key:"render",value:function(){var e=this,t=this.state.data.map((function(t){return o.a.createElement("div",{key:t._id,className:"user"},o.a.createElement("div",{className:"title"},o.a.createElement("textarea",{name:"title",onChange:function(a){return e.changeHandler(a,t._id)},value:t.title,placeholder:"New title"})),o.a.createElement("div",{className:"content"},o.a.createElement("textarea",{name:"content",onChange:function(a){return e.changeHandler(a,t._id)},value:t.content,placeholder:"New content"})),o.a.createElement("button",{onClick:function(a){return e.deleteHandler(a,t._id)}},"delete"),o.a.createElement("button",{onClick:function(a){return e.saveHandler(a,t._id,t.title,t.content)}},"save"))}));return this.state.isValid?o.a.createElement("div",{className:"userpage"},o.a.createElement("div",{className:"userbutton"},o.a.createElement("button",{onClick:this.newNoteHandler}," Add new note"),o.a.createElement("button",{onClick:this.logoutHandler}," logout")),o.a.createElement("div",{className:"userposts"},t)):o.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),b=a(28),k=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",name:"",msg:null,isLogin:!0},e.submitLoginHandler=function(t){t.preventDefault(),p.a.post("/auth/login",{email:e.state.email,password:e.state.password}).then((function(t){console.log(t.data),t.data.error?e.setState({msg:t.data.error}):t.headers["auth-token"]&&(localStorage.setItem("auth-token",t.headers["auth-token"]),e.props.history.push("/user"))}))},e.submitRegisterHandler=function(t){t.preventDefault(),p.a.post("/auth/register",{email:e.state.email,password:e.state.password,name:e.state.name}).then((function(t){t.data.error?e.setState({msg:t.data.error}):e.setState({isLogin:!0,msg:"successfully registered"})}))},e.changeHandler=function(t){console.log(t.target.value),e.setState(Object(b.a)({},t.target.name,t.target.value))},e.toggleHandler=function(){console.log("clicked"),e.setState({isLogin:!e.state.isLogin})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=o.a.createElement("form",{className:"form"},o.a.createElement("label",null,"Email"),o.a.createElement("input",{type:"text",name:"email",onChange:function(t){return e.changeHandler(t)},value:this.state.email}),o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"text",name:"password",onChange:function(t){return e.changeHandler(t)},value:this.state.password}),o.a.createElement("button",{onClick:this.submitLoginHandler},"LOGIN"),o.a.createElement("button",{onClick:this.toggleHandler},"Go to ",this.state.isLogin?"Signup":"Login")),a=o.a.createElement("form",{className:"form"},o.a.createElement("label",null,"Email"),o.a.createElement("input",{type:"text",name:"email",onChange:function(t){return e.changeHandler(t)},value:this.state.email}),o.a.createElement("label",null,"Name"),o.a.createElement("input",{type:"text",name:"name",onChange:function(t){return e.changeHandler(t)},value:this.state.name}),o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"text",name:"password",onChange:function(t){return e.changeHandler(t)},value:this.state.password}),o.a.createElement("button",{onClick:this.submitRegisterHandler},"Signup"),o.a.createElement("button",{onClick:this.toggleHandler},"Go to ",this.state.isLogin?"Signup":"Login"));return o.a.createElement("div",null,this.state.isLogin?t:a,this.state.msg&&o.a.createElement("h4",{className:"error"},this.state.msg))}}]),a}(n.Component),w=function(e){return o.a.createElement("div",{className:"navbar"},o.a.createElement("h2",null," Smart Notes"))},N=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(w,null),o.a.createElement(m.a,null,o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:"/",component:k}),o.a.createElement(d.a,{path:"/user",component:E}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.1266b6a3.chunk.js.map